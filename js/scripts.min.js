$(function(){function t(){$("#widths input[name='total_width']").attr("value",e.utils.get_total_width());$("#widths input.number").bind("change blur keyup",function(){$("#widths input[name='total_width']").attr("value",e.utils.get_total_width())})}function n(){$(".minus").bind("click",function(){var e=$(this),n=e.attr("data-pair");$(".pair_"+n).remove();t();o();return!1})}function r(e){var r=typeof e=="number"?e:"",i=$("#widths .number_wrapper").length;$("#widths .equals").before('<div class="operator pair pair_'+i+'">+</div><div class="number_wrapper pair_'+i+'"><a href="#" class="minus" data-pair="'+i+'">&#9587;</a><input type="text" class="number" value="'+r+'" /></div>');$("#widths input.number:last").focus();t();n()}function i(){var e=document.location.href,t=document.domain,n=e.replace("http://"+t,""),r=n.split("/").map(Number),i=$.grep(r,function(e){return e});return i}function s(){var e=i();if(e.length>0){$(".pair").not(".pair_1").remove();$.each(e,function(e,t){e===0?$(".number_wrapper.pair_1 input").attr("value",t):r(t)});$("#widths button").click()}}function o(){var t=e.utils.get_total_width(),n=e.utils.array_from_inputs();if(t===0){$("#widths input.number").addClass("error");return!1}$("#widths input.number").removeClass("error");$(".example div").html("");$.each(n,function(n,r){var i=r,s=100*parseFloat(i)/parseFloat(t),o=e.utils.round_number(s,5),u=e.utils.random_color(),a='<div class="example_column" style="width: '+o+"%; background: "+u+';"></div>',f='<div class="values" style="width: '+o+"%; color: "+u+'">'+o+'% <br><span class="pixels">(was '+i+"px)</span></div>";$("#example_bar").append(a);$("#example_num").append(f)});var r="/"+n.join("/");history.pushState(null,null,r)}var e={};e.utils={random_color:function(){var e=[[20,220],[20,220],[20,220]],t=function(){var t=e.splice(Math.floor(Math.random()*e.length),1)[0];return Math.floor(Math.random()*(t[1]-t[0]))+t[0]};return"rgb("+t()+","+t()+","+t()+")"},round_number:function(e,t){var n=Math.round(e*Math.pow(10,t))/Math.pow(10,t);return n},array_from_inputs:function(){var e=$("#widths"),t=e.find("input.number"),n=[];$.each(t,function(e,t){var r=~~$(t).val();n.push(r)});return n},get_total_width:function(){var t=e.utils.array_from_inputs(),n=0;$.each(t,function(e,t){n=~~(n+t)});return n}};$("#widths button").on("click",function(){o();return!1});$("#widths").on("keyup","input",function(){o()});$(document).on("keyup",function(e){e.keyCode==9&&r()}).on("click","input");$("#add_el").on("click",function(){r();return!1});s();t();n();i()});